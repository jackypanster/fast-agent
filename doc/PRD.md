# æ™ºèƒ½å¹³å°åŠ©æ‰‹ (Platform Agent) äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

## 1. æ„¿æ™¯ä¸ç›®æ ‡

### 1.1. æ„¿æ™¯
æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„ã€ç”±å¤šä¸ªä¸“å®¶ Agent åä½œçš„æ™ºèƒ½å¹³å°åŠ©æ‰‹ï¼ˆPlatform Agentï¼‰ã€‚

### 1.2. æ ¸å¿ƒç›®æ ‡
èµ‹èƒ½å›¢é˜Ÿæ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬å¼€å‘è€…ã€æµ‹è¯•ã€è¿ç»´ï¼‰ï¼Œä½¿å…¶èƒ½é€šè¿‡è‡ªç„¶è¯­è¨€ä¸å¤æ‚çš„è¿ç»´ä»»åŠ¡è¿›è¡Œé«˜æ•ˆã€å®‰å…¨çš„äº¤äº’ã€‚Platform Agent å°†é›†æˆå¤šç§å·¥å…·ï¼Œå¤„ç†åŒ…æ‹¬ä½†ä¸é™äº Kubernetes ç®¡ç†ã€ç½‘ç»œä¿¡æ¯è·å–ã€ç³»ç»Ÿç›‘æ§ç­‰å¤šæ–¹é¢çš„å·¥ä½œï¼Œæ—¨åœ¨å°†ç¹ççš„è¿ç»´æ“ä½œè‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€‚

---

## 2. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

### 2.1. ç³»ç»Ÿé›†æˆ
1.  **Agent æ¡†æ¶**: åŸºäº `crewAI` (https://www.crewai.com/) Python æ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œå¹¶éµå¾ªå…¶å¤š Agent åä½œçš„æœ€ä½³å®è·µã€‚
2.  **å·¥å…·é›†**:
    - **K8s MCP å·¥å…·**: é€šè¿‡ `MCPServerAdapter` è¿æ¥çœŸå®çš„ K8s MCP æœåŠ¡å™¨ï¼Œè·å–å®Œæ•´çš„é›†ç¾¤ç®¡ç†å’Œè¿ç»´å·¥å…·é›†ã€‚
    - **æ‰©å±• MCP å·¥å…·**: æ”¯æŒé›†æˆå¤šç§å¤–éƒ¨ MCP æœåŠ¡å™¨æä¾›çš„å·¥å…·é›†ï¼ˆå¦‚ç½‘é¡µæŠ“å–ã€æ–‡æ¡£å¤„ç†ç­‰ï¼‰ã€‚
3.  **LLM é›†æˆ**: é›†æˆ Google `gemini-2.5-flash` å¤§è¯­è¨€æ¨¡å‹ã€‚æ¨¡å‹æœåŠ¡é€šè¿‡ `OpenRouter` (https://openrouter.ai/) æ¥å…¥ï¼Œé…ç½®ä¿¡æ¯é€šè¿‡ `.env` æ–‡ä»¶ç®¡ç†ã€‚
4.  **è®°å¿†ç³»ç»Ÿ**: âœ… å·²æˆåŠŸå®æ–½å¹¶éªŒè¯ CrewAI çš„æŒä¹…åŒ–è®°å¿†åŠŸèƒ½ï¼Œé›†æˆQwen text-embedding-v4å®ç°æ™ºèƒ½åŒ–ä¸­æ–‡ç†è§£ã€‚ä¸º Agent æä¾›äº†è·¨ä¼šè¯çš„å­¦ä¹ èƒ½åŠ›å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼Œæ˜¯é«˜çº§äº¤äº’çš„æ ¸å¿ƒåŸºç¡€ã€‚

### 2.2. æ ¸å¿ƒäº¤äº’ä½“éªŒï¼šå¤š Agent åä½œ
Platform Agent çš„æ ¸å¿ƒæ˜¯ä¸åŒé¢†åŸŸçš„ä¸“å®¶ Agent ååŒå·¥ä½œï¼Œå…±åŒå®Œæˆç”¨æˆ·çš„å¤æ‚è¯·æ±‚ã€‚
1.  **èŒè´£åˆ†ç¦»**: æ¯ä¸ª Agent éƒ½æœ‰æ˜ç¡®çš„è§’è‰²ï¼ˆå¦‚ K8s ä¸“å®¶ã€ç½‘ç»œç ”ç©¶å‘˜ï¼‰å’Œä¸“å±çš„å·¥å…·é›†ã€‚
2.  **é¡ºåºæµè½¬**: å¯¹äºä¸€ä¸ªåŒ…å«å¤šä¸ªå­ä»»åŠ¡çš„è¯·æ±‚ï¼ŒCrew ä¼šæŒ‰é¡ºåºå°†ä»»åŠ¡åˆ†é…ç»™æœ€åˆé€‚çš„ Agentã€‚ä¾‹å¦‚ï¼Œå…ˆç”± K8s ä¸“å®¶åˆ†æé›†ç¾¤ï¼Œå†ç”±ç½‘ç»œç ”ç©¶å‘˜æŠ“å–ç›¸å…³æ–‡æ¡£ã€‚
3.  **æ™ºèƒ½è®°å¿†ä¸ä¸­æ–‡ä¼˜åŒ–**: Crew ä¸­çš„æ‰€æœ‰ Agent å…±äº«åŸºäºQwen embeddingçš„æ™ºèƒ½è®°å¿†åº“ã€‚è¿™ä½¿å¾—å®ƒä»¬ä¸ä»…èƒ½ç†è§£åˆå§‹çš„ç”¨æˆ·è¯·æ±‚ï¼Œè¿˜èƒ½ï¼š
    - **è·¨ä¼šè¯è®°å¿†**: å›å¿†èµ·å†å²äº¤äº’å’Œç”¨æˆ·åå¥½
    - **ä¸­æ–‡å¢å¼º**: ä¼˜ç§€çš„ä¸­æ–‡K8sæœ¯è¯­ç†è§£å’Œè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—
    - **å®ä½“å…³è”**: æ™ºèƒ½è¯†åˆ«å’Œå…³è”K8sé›†ç¾¤ã€å‘½åç©ºé—´ã€åº”ç”¨ç­‰å®ä½“
    - **ä¸Šä¸‹æ–‡å†³ç­–**: åŸºäºå†å²ç»éªŒåšå‡ºæ›´æ™ºèƒ½ã€æ›´å…·ä¸Šä¸‹æ–‡çš„å†³ç­–

### 2.3. æ ¸å¿ƒäº¤äº’åœºæ™¯ç¤ºä¾‹
**åœºæ™¯**: DevOps å·¥ç¨‹å¸ˆ `Charlie` éœ€è¦å¿«é€Ÿäº†è§£å½“å‰æ‰€æœ‰ K8s é›†ç¾¤çš„æ¦‚å†µï¼Œå¹¶åŒæ—¶è·å– `crewAI` å®˜æ–¹ç½‘ç«™çš„æœ€æ–°ä¿¡æ¯ä»¥è¯„ä¼°å…¶æ–°ç‰¹æ€§ã€‚

**äº¤äº’æµç¨‹**:
1.  **Charlie**: "show me all k8s clusters and also fetch the main content from https://crewai.com"
2.  **Platform Agent (å¯åŠ¨)**: Crew æ¥æ”¶åˆ°æŒ‡ä»¤ï¼Œå¼€å§‹é¡ºåºæ‰§è¡Œä»»åŠ¡æµã€‚
3.  **K8s Expert Agent (ä»»åŠ¡ä¸€)**:
    - **åˆ†æ**: "è¯·æ±‚ä¸­åŒ…å«'k8s clusters'ï¼Œè¿™å±äºæˆ‘çš„èŒè´£èŒƒå›´ã€‚"
    - **è¡ŒåŠ¨**: è°ƒç”¨çœŸå®K8s MCPå·¥å…·ï¼ˆå¦‚ `list_clusters`, `GET_CLUSTER_INFO` ç­‰ï¼‰ã€‚
    - **è¾“å‡º**: ç”Ÿæˆä¸€ä»½è¯¦ç»†çš„ K8s é›†ç¾¤åˆ†ææŠ¥å‘Šï¼Œå¹¶å°†å…¶å­˜å…¥è®°å¿†ã€‚
4.  **Web Researcher Agent (ä»»åŠ¡äºŒ)**:
    - **åˆ†æ**: "è¯·æ±‚ä¸­åŒ…å« URL 'https://crewai.com'ï¼Œè¿™æ˜¯æˆ‘çš„ä»»åŠ¡ã€‚"
    - **è¡ŒåŠ¨**: é€šè¿‡ MCP è¿æ¥è°ƒç”¨ `fetch` å·¥å…·ã€‚
    - **è¾“å‡º**: ç”Ÿæˆä¸€ä»½ `crewai.com` ç½‘ç«™å†…å®¹çš„æ‘˜è¦ï¼Œå¹¶å°†å…¶å­˜å…¥è®°å¿†ã€‚
5.  **Platform Agent (æ•´åˆ)**: Crew æ•´åˆä¸¤ä¸ª Agent çš„è¾“å‡ºï¼Œå½¢æˆä¸€ä»½å®Œæ•´çš„ã€åŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹çš„æœ€ç»ˆæŠ¥å‘Šã€‚
6.  **Charlie**: (æ”¶åˆ°ä¸€ä»½åŒ…å« K8s é›†ç¾¤çŠ¶æ€å’Œç½‘ç«™æ‘˜è¦çš„ç»¼åˆæŠ¥å‘Š)ã€‚

### 2.4. (è§„åˆ’ä¸­) ä¸»åŠ¨å¼å¼•å¯¼ä¸æ•™å­¦
*æ­¤éƒ¨åˆ†åŠŸèƒ½ç»§æ‰¿è‡ªåŸ Platform Agent è®¾æƒ³ï¼Œæ˜¯ä¸‹ä¸€æ­¥é’ˆå¯¹å•ä¸ª Agent è¿›è¡Œèƒ½åŠ›å¢å¼ºçš„æ–¹å‘ã€‚*
1.  **å¿«æ·æŒ‡ä»¤**
2.  **å¼•å¯¼å¼æ¢ç´¢**
3.  **è¿ç»´æœ€ä½³å®è·µæ•™å­¦**

### 2.5. (è§„åˆ’ä¸­) æ€§èƒ½ä¸æ•ˆç‡ï¼šç¼“å­˜ç­–ç•¥
*æ­¤éƒ¨åˆ†ä¸ºæœªæ¥ä¼˜åŒ–é¡¹ã€‚*
1.  **ç¼“å­˜ç›®æ ‡**
2.  **ç¼“å­˜å®ç°**

---

## 4. MVP å®æ–½è®¡åˆ’ä¸æŠ€æœ¯é€‰å‹

### 4.1. æŠ€æœ¯æ ˆ (Technology Stack)
- **Python ç¯å¢ƒä¸åŒ…ç®¡ç†**: `uv`
- **Agent æ¡†æ¶**: `crewAI` 
- **LLM Provider**: `OpenRouter` (æ¨¡å‹: `google/gemini-2.5-flash-preview-05-20`)
- **Embedding Provider**: `Qwen` (æ¨¡å‹: `text-embedding-v4`) - ä¼˜åŒ–ä¸­æ–‡ç†è§£å’Œæˆæœ¬æ§åˆ¶
- **Memory Backend**: `ChromaDB` + `SQLite` - å‘é‡å­˜å‚¨å’ŒæŒä¹…åŒ–

### 4.2. MVP èŒƒå›´ (å·²å®Œæˆå¹¶å¤§å¹…æ‰©å±•)
- **äº¤ä»˜å½¢æ€**: å‘½ä»¤è¡Œç•Œé¢ (CLI) åº”ç”¨ï¼Œå…·å¤‡æ™ºèƒ½è®°å¿†å’Œä¸­æ–‡ä¼˜åŒ–èƒ½åŠ›ã€‚
- **æ ¸å¿ƒç”¨æˆ·æ•…äº‹**: å®Œæ•´å®ç°å¤šAgentåä½œã€æ™ºèƒ½è®°å¿†å’Œè·¨ä¼šè¯å­¦ä¹ çš„ä¼ä¸šçº§å¹³å°åŠ©æ‰‹ã€‚
- **âœ… å·²å®ç°åŠŸèƒ½**:
    1. âœ… **å¤šAgentåä½œ**: K8sä¸“å®¶å’Œç½‘ç»œç ”ç©¶å‘˜çš„ååŒå·¥ä½œ
    2. âœ… **æ™ºèƒ½è®°å¿†ç³»ç»Ÿ**: åŸºäºQwen embeddingçš„ä¸‰å±‚è®°å¿†(çŸ­æœŸ/é•¿æœŸ/å®ä½“)
    3. âœ… **ä¸­æ–‡ä¼˜åŒ–**: ä¼˜ç§€çš„ä¸­æ–‡K8sæœ¯è¯­ç†è§£å’Œè¯­ä¹‰åˆ†æ
    4. âœ… **è·¨ä¼šè¯å­¦ä¹ **: ç”¨æˆ·åå¥½å’Œå†å²äº¤äº’çš„æŒä¹…åŒ–è®°å¿†
    5. âœ… **æˆæœ¬ä¼˜åŒ–**: Qwen embeddingç›¸æ¯”OpenAIæ˜¾è‘—é™ä½APIæˆæœ¬
    6. âœ… **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„æµ‹è¯•éªŒæ”¶ä½“ç³»å’Œæ€§èƒ½åŸºå‡†
- **ğŸ¯ è¶…è¶ŠMVPçš„æˆå°±**:
    - **æŠ€æœ¯çªç ´**: æˆåŠŸé›†æˆå›½äº§å…ˆè¿›embeddingæ¨¡å‹
    - **äº§å“ä»·å€¼**: å®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–è¿ç»´å¯¹è¯ä½“éªŒ
    - **ä¼ä¸šç‰¹æ€§**: ä¸­æ–‡åœºæ™¯ä¼˜åŒ–å’Œæˆæœ¬æ§åˆ¶

### 4.3. å¼€å‘åŸåˆ™ (Development Principles)
- **ç¼–ç é£æ ¼**: éµå¾ª CrewAI å®˜æ–¹æœ€ä½³å®è·µï¼Œä½¿ç”¨ `@CrewBase` å’Œé…ç½®é©±åŠ¨çš„æ¨¡å¼ã€‚
- **âœ… å·²å®ç°ç›®æ ‡**: **ç”¨æœ€å°‘çš„ä»£ç è·‘é€šå¤š Agent åä½œçš„æ ¸å¿ƒé“¾è·¯**ã€‚
- **âœ… å·²å®Œæˆç›®æ ‡**: **å¯ç”¨å¹¶éªŒè¯æŒä¹…åŒ–è®°å¿†èƒ½åŠ›**ã€‚
- **ğŸš€ ä¸‹ä¸€é˜¶æ®µç›®æ ‡**: **ä¼ä¸šçº§åŠŸèƒ½å¢å¼ºå’Œç”Ÿæ€é›†æˆ**ã€‚

---

## 5. å·²åˆ†ç¦»çš„éœ€æ±‚ï¼šK8s çŠ¶æ€æ•°æ®æŒä¹…åŒ–

åŸ PRD ä¸­æåˆ°çš„"å°† K8s æ‰€æœ‰ä¿¡æ¯ç»Ÿè®¡å‡ºæ¥å¹¶æŒä¹…åŒ–åˆ°æ•°æ®åº“"æ˜¯ä¸€ä¸ªæ˜ç¡®çš„ã€å‘¨æœŸæ€§çš„æ•°æ®æå–ï¼ˆETLï¼‰ä»»åŠ¡ã€‚

**ç»“è®º**ï¼š**ä¸å»ºè®®**ä½¿ç”¨ LLM Agent æ¥æ‰§è¡Œæ­¤ä»»åŠ¡ã€‚

**ç†ç”±**ï¼š
- **ç¨³å®šæ€§**: ä¼ ç»Ÿè„šæœ¬æ˜¯ç¡®å®šæ€§çš„ï¼Œè€Œ Agent çš„å¤šæ­¥æ¨ç†å­˜åœ¨ä¸ç¡®å®šæ€§ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®é—æ¼æˆ–é”™è¯¯ã€‚
- **æˆæœ¬æ•ˆç›Š**: ETL ä»»åŠ¡éœ€è¦é«˜é¢‘ã€å…¨é‡æŠ“å–ï¼Œä½¿ç”¨ LLM ä¼šäº§ç”Ÿä¸å¿…è¦çš„æŒç»­æ€§APIè°ƒç”¨æˆæœ¬ã€‚
- **æ€§èƒ½**: ä¸“ç”¨è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡è¿œé«˜äº Agent çš„"æ€è€ƒ->æ‰§è¡Œ"å¾ªç¯ã€‚

**å»ºè®®æ–¹æ¡ˆ**:
- ä½¿ç”¨å®˜æ–¹çš„ `kubernetes-python` å®¢æˆ·ç«¯åº“ï¼Œç¼–å†™ä¸€ä¸ªç‹¬ç«‹çš„ã€å¥å£®çš„ Python è„šæœ¬ã€‚
- è¯¥è„šæœ¬è´Ÿè´£è¿æ¥ K8s API Serverï¼Œéå†æ‰€éœ€èµ„æºï¼ˆCluster, Namespace, Pod, PV, PVC ç­‰ï¼‰ï¼Œå¹¶å°†ç»“æœå­˜å…¥ç›®æ ‡æ•°æ®åº“ã€‚
- å¯é€šè¿‡ CronJob æˆ–å…¶ä»–è°ƒåº¦ç³»ç»Ÿå®ç°è¯¥è„šæœ¬çš„å‘¨æœŸæ€§æ‰§è¡Œã€‚

æ­¤ä»»åŠ¡å°†ä½œä¸ºç‹¬ç«‹é¡¹ç›®è¿›è¡Œï¼Œä¸ Platform Agent é¡¹ç›®è§£è€¦ã€‚

ref:

1. https://github.com/HSn0918/kubernetes-mcp
2. https://github.com/crewAI/crewAI
3. https://docs.crewai.com/
4. https://docs.crewai.com/en/concepts/memory (Memory System)
5. https://openrouter.ai/google/gemini-2.5-flash-preview-05-20
6. https://docs.crewai.com/en/mcp/overview (MCP Integration)
